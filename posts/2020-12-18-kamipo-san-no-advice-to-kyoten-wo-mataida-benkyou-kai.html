<!DOCTYPE html><html lang="ja"><head><script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-44082439-2"></script><script>
              window.dataLayer = window.dataLayer || [];
              function gtag(){dataLayer.push(arguments);}
              gtag('js', new Date());

              gtag('config', 'UA-44082439-2');
            </script><title>kamipoさんのアドバイスと拠点を跨いだ勉強会 - alpaca-tc</title><meta charSet="utf-8"/><meta name="viewport" content="initial-scale=1.0, width=device-width"/><meta name="title" content="kamipoさんのアドバイスと拠点を跨いだ勉強会 - alpaca-tc"/><meta name="description" content=""/><link rel="shortcut icon" href="/images/common/favicon.ico" type="image/x-icon"/><meta name="google-site-verification" content="thSL3cUT7BV1-AENglRFIF-kv6I85JJ6_iUGAU8GaQI"/><meta property="og:title" content="kamipoさんのアドバイスと拠点を跨いだ勉強会 - alpaca-tc"/><meta property="og:locale" content="ja_JP"/><meta property="og:image" content="https://alpaca.tc/images/common/profile.jpg"/><meta property="og:type" content="blog"/><meta property="og:url" content="https://alpaca.tc/posts/2020-12-18-kamipo-san-no-advice-to-kyoten-wo-mataida-benkyou-kai"/><meta property="og:site_name" content="alpaca-tc"/><meta property="og:description" content=""/><meta property="fb:app_id" content="224701561024840"/><meta name="twitter:card" content="summary"/><meta name="twitter:title" content="kamipoさんのアドバイスと拠点を跨いだ勉強会 - alpaca-tc"/><meta name="twitter:description" content=""/><meta name="twitter:image" content="https://alpaca.tc/images/meta/twitter.jpg"/><meta name="twitter:site" content="@alpaca_tc"/><meta name="twitter:creator" content="@alpaca_tc"/><meta name="next-head-count" content="23"/><link rel="preload" href="/_next/static/css/12751740b451bc95eca1.css" as="style"/><link rel="stylesheet" href="/_next/static/css/12751740b451bc95eca1.css" data-n-g=""/><noscript data-n-css=""></noscript><link rel="preload" href="/_next/static/chunks/webpack-16c36cd9ff8ba7dcf7db.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework-159e6bcedf8862d2ffb2.js" as="script"/><link rel="preload" href="/_next/static/chunks/679-111107f27ddf1c4ca974.js" as="script"/><link rel="preload" href="/_next/static/chunks/778-afdc0fd1e03e237f558b.js" as="script"/><link rel="preload" href="/_next/static/chunks/main-b585fbee1813a2c23693.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-8034d102492099615e81.js" as="script"/><link rel="preload" href="/_next/static/chunks/a9a7754c-5d9f4b6dc0a2d6223edb.js" as="script"/><link rel="preload" href="/_next/static/chunks/968-ae4b333367f0f3fb3947.js" as="script"/><link rel="preload" href="/_next/static/chunks/625-b9d82b074d475791488b.js" as="script"/><link rel="preload" href="/_next/static/chunks/711-0bda0016c1b930f4defc.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/posts/%5Bid%5D-74a835234b9c2961e653.js" as="script"/></head><body class="font-sans text-black leading-tight antialiased"><div id="__next"><div class="py-8 lg:py-16 px-6 md:px-16 lg:px-24 "><div class="relative z-20 flex justify-between items-center"><div class="flex lg:flex md:block items-center max-w-full"><div class="mb-0 md:mb-4 lg:mb-0 flex flex-shrink-0 pr-4 md:pr-6 lg:pr-12"><div class="inline-block h-10 w-10 md:h-12 md:w-12 lg:h-20 lg:w-20"><a class="flex items-center no-underline"><img class="rounded-full" src="/images/profile.jpg" width="100%" height="100%"/></a></div></div><div><a class="block text-black no-underline font-bold text-xl lg:text-3xl font-extrabold leading-none lg:leading-tight" href="/">alpaca-tc</a><div class="hidden md:flex mt-3 lg:mt-4 uppercase tracking-wide text-xs space-x-6"><a class="text-black font-semibold no-underline hover:text-black" href="/">Posts</a><a class="text-gray-500 font-semibold no-underline hover:text-black" href="/about_me">About Me</a><a class="text-gray-500 font-semibold no-underline hover:text-black" href="/works">Works</a><a href="https://github.com/alpaca-tc" class="text-gray-500 font-semibold no-underline hover:text-black" target="_blank" rel="noreferrer">GitHub</a><a href="https://twitter.com/alpaca-tc" class="text-gray-500 font-semibold no-underline hover:text-black" target="_blank" rel="noreferrer">Twitter</a></div></div></div><div class="block md:hidden"><button class="block"><svg fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" class="text-black h-6 w-6 block"><path d="M0 3h20v2H0V3zm0 6h20v2H0V9zm0 6h20v2H0v-2z"></path></svg><svg fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" class="text-black h-6 w-6 hidden"><path d="M10 8.586L2.929 1.515 1.515 2.929 8.586 10l-7.071 7.071 1.414 1.414L10 11.414l7.071 7.071 1.414-1.414L11.414 10l7.071-7.071-1.414-1.414L10 8.586z"></path></svg></button></div></div><div class="md:hidden z-10 bg-white fixed pt-24 pin block hidden"><div class="space-y-8 overflow-y-auto pt-6 pb-8 px-12 max-h-full overflow-y-auto"><a class="block text-black font-bold no-underline" href="/">Posts</a><a class="block text-black font-bold no-underline" href="/about_me">About Me</a><a class="block text-black font-bold no-underline" href="/works">Works</a><a href="https://github.com/alpaca-tc" class="block text-black font-bold no-underline" target="_blank" rel="noreferrer">GitHub</a><a href="https://twitter.com/alpaca-tc" class="block text-black font-bold no-underline" target="_blank" rel="noreferrer">Twitter</a></div></div><div class="lg:pl-32 mt-12"><article class="max-w-3xl md:mt-6 rounded-xl mx-auto bg-white dark:bg-cool-gray-800"><div class="text-grey-dark uppercase font-semibold text-xs tracking-wide">2020-12-18</div><h1 class="text-2xl font-extrabold text-black leading-tight mt-1 mb-6">kamipoさんのアドバイスと拠点を跨いだ勉強会</h1><div class="prose max-w-3xl mx-auto dark:text-cool-gray-100"><p>この記事は<a href="https://adventar.org/calendars/5425">京都開発拠点アドベントカレンダー</a> 18日目の記事です。</p>
<p>マネーフォワードには開発拠点が複数ありますが、技術情報はSlackで議論・共有されています。<br>
今日はそんなSlackの中から、東京拠点と京都拠点を跨いで開催した「Railsへコントリビュートする勉強会」について、東京拠点の<a href="https://github.com/alpaca-tc">アルパカ隊長</a>が紹介します。</p>
<h2>はじまりのSlack</h2>
<p>ふとした時に、社内SlackのRubyチャンネルでこんな会話がありました。</p>
<blockquote>
<p><img width="20" alt="@alpaca-tc" src="/images/blog/kamipo-san-no-advice-to-kyoten-wo-mataida-benkyou-kai/alpaca-tc.jpg"> @alpaca-tc</p>
<p>程よい難易度で、kamipoさんが「これ自分がやらんでもええやろ」みたいなissueがあれば</p>
<p>このslackに投げてもらって</p>
<p>誰かシニアエンジニアがサポートしつつ、新卒がRailsコントリビュートするみたいなのやりたい:eyes:</p>
</blockquote>
<p>すると、kamipoさんからすぐ解決できるものは見た瞬間に直してしまっていると前置きがあった上で、
こんなissueを教えてもらいました。</p>
<!-- more -->
<blockquote>
<p><img width="20" alt="@kamipo" src="/images/blog/kamipo-san-no-advice-to-kyoten-wo-mataida-benkyou-kai/kamipo.png"> @kamipo</p>
<p>簡単じゃないけど直したほうがいいと思ってるやつだとたとえば <a href="https://github.com/rails/rails/issues/35204">rails/rails#35204</a> とか。</p>
<p>これはautomatic_inverse_ofがバグっててinverse_ofって一対一の関係になるはずなのに</p>
<p>belongs_to :user と belongs_to :writer の両方ともinverse_ofが :user と誤認されるってバグで、</p>
<p>起きてることに気づきづらいから直したほうがいいんだけど</p>
<p>inverse_of: false すれば回避できるから優先順位が低い、とかそういう系のはいっぱいある。</p>
</blockquote>
<p>ふーむ、パッと見はよく分かりません。程よい難易度を感じます。<br>
追加でかなり詳しいアドバイス(ほぼ答え)をいただいて、早速チャレンジですヽ(・∀・ )ﾉ</p>
<h2>拠点を跨いで勉強会を開催</h2>
<p>昨今のコロナ禍によってオンライン化が一気に進みました。(僕も、今年は数回しか出社していません)<br>
おかげで、拠点間を跨ぐオンライン勉強会も突発的に開催できるようになりました。</p>
<h3>当日の流れ</h3>
<p>今回は、京都の開発メンバーを含めた数人のメンバーを募り、Discordで話しながらkamipoさんのアドバイスを紐解いていくことになりました。</p>
<h4>まずはセットアップ</h4>
<p><a href="https://edgeguides.rubyonrails.org/contributing_to_ruby_on_rails.html">Contributing to Ruby on Rails</a>からActiveRecordに関するセットアップ手順を抜粋して、各自でローカル環境をセットアップしていきます。<br>
その上で、先ほどのissueを再現するテストコードを書いて、テストが失敗する状態を再現しました。</p>
<p><a href="https://gist.github.com/alpaca-tc/e53fa34a55ebee4a170b54a87c266761">当日のセットアップ手順書</a></p>
<h4>続いて調査</h4>
<p>そして、全員の環境でテストが失敗する状態になったら、kamipoさんにいただいたアドバイスを調査していきます。</p>
<blockquote>
<p><img width="20" alt="@kamipo" src="/images/blog/kamipo-san-no-advice-to-kyoten-wo-mataida-benkyou-kai/kamipo.png"> @kamipo</p>
<p>このissueを参照してるここ <a href="https://github.com/rails/rails/pull/36708#discussion_r307672794">rails/rails#36708</a> でも言及してるんですが、</p>
<p>automatic_inverse_ofは改善可能で改善すれば自ずとこの問題も解決されます。具体的には :foreign_key オプションをinverse_of判定に含めることでこれまで判定不能だったinverse_of判定も可能になります。</p>
<p>このissue自体はforeign_key未指定の同一クラス参照してるassociationがある場合にforeign_keyの一致を判定せずにクラスが一致するかどうかだけでinverse_of判定してることが問題なのだと思います。</p>
</blockquote>
<p>ざっくり言うと、<a href="https://github.com/rails/rails/issues/35204">このissue</a>はモデルの関連を指定した時に、判定の条件漏れがあることが原因のようです。<br>
みんなで<a href="https://github.com/ktmouk/rails/blob/98ee2a40bf2df9ee2f7daca5532b71eace410fba/activerecord/lib/active_record/reflection.rb#L602"><code>ActiveRecord::Reflection#automatic_inverse_of</code></a>あたりを読み進めて、inverse_ofの判定処理に誤りがあることを発見しました。</p>
<h2>PRが完成</h2>
<p>わいわい話しながらPRができたところで、kamipoさんにPRを見てもらって更にアドバイスをいただきました。</p>
<ul>
<li>よほどのことがない限り1PR 1commitになるようにするのがのぞましい <a href="https://edgeguides.rubyonrails.org/contributing_to_ruby_on_rails.html#squashing-commits">contribution guide</a></li>
<li>レビュアーがまだ知らない情報は、ぜんぶPRに含めてくれるほうがレビューのハードルが下がるので頑張って欲しい
<ul>
<li>レビュアーが、わざわざこれは正しい変更だと解説コメントしなくてもいいぐらい書くといい</li>
<li>完全さよりもコンテキストを共有する気持ちが重要</li>
</ul>
</li>
</ul>
<p>貴重なアドバイスをいただきながら、完成したPRがこちらです。</p>
<p><a href="https://github.com/rails/rails/pull/40643">rails/rails#40643</a></p>
<p>このPRは無事マージされ、Rails6.1.0でリリースされています🎉</p>
<h2>Slackでの四方山話</h2>
<p>今回は勉強会の話を抜粋しましたが、普段からSlackでは様々なトピックの技術系の話題がなされています。<br>
個人的にも、kamipoさんにアドバイスをいただけたおかげで、直近1ヶ月で4つほどPRを送ることができました。</p>
<ul>
<li><a href="https://github.com/rails/rails/pull/40704">複数DBに対応したrails console --sandbox</a></li>
<li><a href="https://github.com/rails/rails/pull/40545">serializeにデフォルト値を渡せるようにする</a></li>
<li><a href="https://github.com/rails/rails/pull/40538">6.1.0.rc1のバグ修正 1</a></li>
<li><a href="https://github.com/rails/rails/pull/40547">6.1.0.rc1のバグ修正 2</a></li>
</ul>
<p>ひとりでOSSへ取り組むのは難しさがありますが、Slackで議論ができるとハードルがグッと下がって踏み出しやすくなりますね。</p>
<h2>まとめ</h2>
<p>今回の勉強会の件もそうですが、弊社では拠点に関係なくこういった技術の話題でワイワイできます。
ぜひ皆さんも遊びにきてくださいヽ(・∀・ )ﾉ</p>
<p>まとめ
<strong>「kamipoさんはすごい人」</strong></p>
<hr>
<p>(※kamipoさんは弊社社員ではなく、善意でSlackのチャンネルに入ってくださっています。)</p></div><div class="flex justify-end mt-4 h-10 bg"><a href="https://twitter.com/share?url=https%3A%2F%2Falpaca.tc%2Fposts%2F2020-12-18-kamipo-san-no-advice-to-kyoten-wo-mataida-benkyou-kai&amp;text=kamipo%E3%81%95%E3%82%93%E3%81%AE%E3%82%A2%E3%83%89%E3%83%90%E3%82%A4%E3%82%B9%E3%81%A8%E6%8B%A0%E7%82%B9%E3%82%92%E8%B7%A8%E3%81%84%E3%81%A0%E5%8B%89%E5%BC%B7%E4%BC%9A+%7C+" data-url="" data-via="" data-width="120" data-counturl="" rel="nofollow noopener noreferrer" target="_blank"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="twitter" class="svg-inline--fa fa-twitter fa-w-16 h-7 text-gray-400 hover:text-black transition duration-300 cursor-pointer" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"></path></svg></a><a href="https://www.facebook.com/share.php?u=https%3A%2F%2Falpaca.tc%2Fposts%2F2020-12-18-kamipo-san-no-advice-to-kyoten-wo-mataida-benkyou-kai" class="ml-4" data-url="" data-via="" data-width="120" data-counturl="" rel="nofollow noopener noreferrer" target="_blank"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="facebook" class="svg-inline--fa fa-facebook fa-w-16 h-7 text-gray-400 hover:text-black transition duration-300 cursor-pointer" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"></path></svg></a></div></article><aside class="max-w-3xl md:mt-6 mx-auto bg-white"><div class="border-solid border-t-1 border-b-1 border-gray-900"><a class="block lg:flex-half text-gray-600 transition duration-300 hover:text-gray-900 mt-1 mb-1 pt-4 pb-4 border border-solid border-l-0 border-r-0 border-b-0" href="/posts/2020-12-21-rust-advent-calendar"><div><span class="block text-gray-500 uppercase font-semibold text-xs tracking-wide mb-2 no-underline">前の記事</span><span class="block text-gray-500 uppercase text-xs tracking-wide no-underline">2020-12-21</span><div class="underline">Rustでブラウザからバイナリをパースする</div></div></a><a class="block lg:flex-half text-gray-700 transition duration-300 hover:text-gray-900 mt-1 mb-1 pt-4 pb-4 border border-solid border-l-0 border-r-0 border-b-0" href="/posts/2017-07-03-i_retired_from_pixiv"><div><span class="block text-gray-500 uppercase font-semibold text-xs tracking-wide mb-2 no-underline">次の記事</span><span class="block text-gray-500 uppercase text-xs tracking-wide no-underline">2017-07-03</span><div class="underline">ピクシブを退職しました！</div></div></a></div></aside></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"id":"2020-12-18-kamipo-san-no-advice-to-kyoten-wo-mataida-benkyou-kai","title":"kamipoさんのアドバイスと拠点を跨いだ勉強会","date":"2020-12-18 17:21","content":"\u003cp\u003eこの記事は\u003ca href=\"https://adventar.org/calendars/5425\"\u003e京都開発拠点アドベントカレンダー\u003c/a\u003e 18日目の記事です。\u003c/p\u003e\n\u003cp\u003eマネーフォワードには開発拠点が複数ありますが、技術情報はSlackで議論・共有されています。\u003cbr\u003e\n今日はそんなSlackの中から、東京拠点と京都拠点を跨いで開催した「Railsへコントリビュートする勉強会」について、東京拠点の\u003ca href=\"https://github.com/alpaca-tc\"\u003eアルパカ隊長\u003c/a\u003eが紹介します。\u003c/p\u003e\n\u003ch2\u003eはじまりのSlack\u003c/h2\u003e\n\u003cp\u003eふとした時に、社内SlackのRubyチャンネルでこんな会話がありました。\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003e\u003cimg width=\"20\" alt=\"@alpaca-tc\" src=\"/images/blog/kamipo-san-no-advice-to-kyoten-wo-mataida-benkyou-kai/alpaca-tc.jpg\"\u003e @alpaca-tc\u003c/p\u003e\n\u003cp\u003e程よい難易度で、kamipoさんが「これ自分がやらんでもええやろ」みたいなissueがあれば\u003c/p\u003e\n\u003cp\u003eこのslackに投げてもらって\u003c/p\u003e\n\u003cp\u003e誰かシニアエンジニアがサポートしつつ、新卒がRailsコントリビュートするみたいなのやりたい:eyes:\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eすると、kamipoさんからすぐ解決できるものは見た瞬間に直してしまっていると前置きがあった上で、\nこんなissueを教えてもらいました。\u003c/p\u003e\n\u003c!-- more --\u003e\n\u003cblockquote\u003e\n\u003cp\u003e\u003cimg width=\"20\" alt=\"@kamipo\" src=\"/images/blog/kamipo-san-no-advice-to-kyoten-wo-mataida-benkyou-kai/kamipo.png\"\u003e @kamipo\u003c/p\u003e\n\u003cp\u003e簡単じゃないけど直したほうがいいと思ってるやつだとたとえば \u003ca href=\"https://github.com/rails/rails/issues/35204\"\u003erails/rails#35204\u003c/a\u003e とか。\u003c/p\u003e\n\u003cp\u003eこれはautomatic_inverse_ofがバグっててinverse_ofって一対一の関係になるはずなのに\u003c/p\u003e\n\u003cp\u003ebelongs_to :user と belongs_to :writer の両方ともinverse_ofが :user と誤認されるってバグで、\u003c/p\u003e\n\u003cp\u003e起きてることに気づきづらいから直したほうがいいんだけど\u003c/p\u003e\n\u003cp\u003einverse_of: false すれば回避できるから優先順位が低い、とかそういう系のはいっぱいある。\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eふーむ、パッと見はよく分かりません。程よい難易度を感じます。\u003cbr\u003e\n追加でかなり詳しいアドバイス(ほぼ答え)をいただいて、早速チャレンジですヽ(・∀・ )ﾉ\u003c/p\u003e\n\u003ch2\u003e拠点を跨いで勉強会を開催\u003c/h2\u003e\n\u003cp\u003e昨今のコロナ禍によってオンライン化が一気に進みました。(僕も、今年は数回しか出社していません)\u003cbr\u003e\nおかげで、拠点間を跨ぐオンライン勉強会も突発的に開催できるようになりました。\u003c/p\u003e\n\u003ch3\u003e当日の流れ\u003c/h3\u003e\n\u003cp\u003e今回は、京都の開発メンバーを含めた数人のメンバーを募り、Discordで話しながらkamipoさんのアドバイスを紐解いていくことになりました。\u003c/p\u003e\n\u003ch4\u003eまずはセットアップ\u003c/h4\u003e\n\u003cp\u003e\u003ca href=\"https://edgeguides.rubyonrails.org/contributing_to_ruby_on_rails.html\"\u003eContributing to Ruby on Rails\u003c/a\u003eからActiveRecordに関するセットアップ手順を抜粋して、各自でローカル環境をセットアップしていきます。\u003cbr\u003e\nその上で、先ほどのissueを再現するテストコードを書いて、テストが失敗する状態を再現しました。\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://gist.github.com/alpaca-tc/e53fa34a55ebee4a170b54a87c266761\"\u003e当日のセットアップ手順書\u003c/a\u003e\u003c/p\u003e\n\u003ch4\u003e続いて調査\u003c/h4\u003e\n\u003cp\u003eそして、全員の環境でテストが失敗する状態になったら、kamipoさんにいただいたアドバイスを調査していきます。\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003e\u003cimg width=\"20\" alt=\"@kamipo\" src=\"/images/blog/kamipo-san-no-advice-to-kyoten-wo-mataida-benkyou-kai/kamipo.png\"\u003e @kamipo\u003c/p\u003e\n\u003cp\u003eこのissueを参照してるここ \u003ca href=\"https://github.com/rails/rails/pull/36708#discussion_r307672794\"\u003erails/rails#36708\u003c/a\u003e でも言及してるんですが、\u003c/p\u003e\n\u003cp\u003eautomatic_inverse_ofは改善可能で改善すれば自ずとこの問題も解決されます。具体的には :foreign_key オプションをinverse_of判定に含めることでこれまで判定不能だったinverse_of判定も可能になります。\u003c/p\u003e\n\u003cp\u003eこのissue自体はforeign_key未指定の同一クラス参照してるassociationがある場合にforeign_keyの一致を判定せずにクラスが一致するかどうかだけでinverse_of判定してることが問題なのだと思います。\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eざっくり言うと、\u003ca href=\"https://github.com/rails/rails/issues/35204\"\u003eこのissue\u003c/a\u003eはモデルの関連を指定した時に、判定の条件漏れがあることが原因のようです。\u003cbr\u003e\nみんなで\u003ca href=\"https://github.com/ktmouk/rails/blob/98ee2a40bf2df9ee2f7daca5532b71eace410fba/activerecord/lib/active_record/reflection.rb#L602\"\u003e\u003ccode\u003eActiveRecord::Reflection#automatic_inverse_of\u003c/code\u003e\u003c/a\u003eあたりを読み進めて、inverse_ofの判定処理に誤りがあることを発見しました。\u003c/p\u003e\n\u003ch2\u003ePRが完成\u003c/h2\u003e\n\u003cp\u003eわいわい話しながらPRができたところで、kamipoさんにPRを見てもらって更にアドバイスをいただきました。\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eよほどのことがない限り1PR 1commitになるようにするのがのぞましい \u003ca href=\"https://edgeguides.rubyonrails.org/contributing_to_ruby_on_rails.html#squashing-commits\"\u003econtribution guide\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003eレビュアーがまだ知らない情報は、ぜんぶPRに含めてくれるほうがレビューのハードルが下がるので頑張って欲しい\n\u003cul\u003e\n\u003cli\u003eレビュアーが、わざわざこれは正しい変更だと解説コメントしなくてもいいぐらい書くといい\u003c/li\u003e\n\u003cli\u003e完全さよりもコンテキストを共有する気持ちが重要\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e貴重なアドバイスをいただきながら、完成したPRがこちらです。\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://github.com/rails/rails/pull/40643\"\u003erails/rails#40643\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eこのPRは無事マージされ、Rails6.1.0でリリースされています🎉\u003c/p\u003e\n\u003ch2\u003eSlackでの四方山話\u003c/h2\u003e\n\u003cp\u003e今回は勉強会の話を抜粋しましたが、普段からSlackでは様々なトピックの技術系の話題がなされています。\u003cbr\u003e\n個人的にも、kamipoさんにアドバイスをいただけたおかげで、直近1ヶ月で4つほどPRを送ることができました。\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/rails/rails/pull/40704\"\u003e複数DBに対応したrails console --sandbox\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/rails/rails/pull/40545\"\u003eserializeにデフォルト値を渡せるようにする\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/rails/rails/pull/40538\"\u003e6.1.0.rc1のバグ修正 1\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/rails/rails/pull/40547\"\u003e6.1.0.rc1のバグ修正 2\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eひとりでOSSへ取り組むのは難しさがありますが、Slackで議論ができるとハードルがグッと下がって踏み出しやすくなりますね。\u003c/p\u003e\n\u003ch2\u003eまとめ\u003c/h2\u003e\n\u003cp\u003e今回の勉強会の件もそうですが、弊社では拠点に関係なくこういった技術の話題でワイワイできます。\nぜひ皆さんも遊びにきてくださいヽ(・∀・ )ﾉ\u003c/p\u003e\n\u003cp\u003eまとめ\n\u003cstrong\u003e「kamipoさんはすごい人」\u003c/strong\u003e\u003c/p\u003e\n\u003chr\u003e\n\u003cp\u003e(※kamipoさんは弊社社員ではなく、善意でSlackのチャンネルに入ってくださっています。)\u003c/p\u003e"},"prevPost":{"id":"2020-12-21-rust-advent-calendar","title":"Rustでブラウザからバイナリをパースする","date":"2020-12-21 17:21"},"nextPost":{"id":"2017-07-03-i_retired_from_pixiv","title":"ピクシブを退職しました！","date":"2017-07-03 00:03"}},"__N_SSG":true},"page":"/posts/[id]","query":{"id":"2020-12-18-kamipo-san-no-advice-to-kyoten-wo-mataida-benkyou-kai"},"buildId":"sn9ByPFgfrJ7FmrC3-2aV","isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-8683bd742a84c1edd48c.js"></script><script src="/_next/static/chunks/webpack-16c36cd9ff8ba7dcf7db.js" async=""></script><script src="/_next/static/chunks/framework-159e6bcedf8862d2ffb2.js" async=""></script><script src="/_next/static/chunks/679-111107f27ddf1c4ca974.js" async=""></script><script src="/_next/static/chunks/778-afdc0fd1e03e237f558b.js" async=""></script><script src="/_next/static/chunks/main-b585fbee1813a2c23693.js" async=""></script><script src="/_next/static/chunks/pages/_app-8034d102492099615e81.js" async=""></script><script src="/_next/static/chunks/a9a7754c-5d9f4b6dc0a2d6223edb.js" async=""></script><script src="/_next/static/chunks/968-ae4b333367f0f3fb3947.js" async=""></script><script src="/_next/static/chunks/625-b9d82b074d475791488b.js" async=""></script><script src="/_next/static/chunks/711-0bda0016c1b930f4defc.js" async=""></script><script src="/_next/static/chunks/pages/posts/%5Bid%5D-74a835234b9c2961e653.js" async=""></script><script src="/_next/static/sn9ByPFgfrJ7FmrC3-2aV/_buildManifest.js" async=""></script><script src="/_next/static/sn9ByPFgfrJ7FmrC3-2aV/_ssgManifest.js" async=""></script></body></html>